# Руководство по устранению неполадок RAG с источниками

## Проблемы с кнопками "Скопировать" и "Детали"

### Возможные причины и решения

#### 1. Bootstrap не загружен
**Симптомы:** Модальные окна не открываются, ошибки в консоли типа "bootstrap is not defined"

**Решение:**
- Убедитесь, что Bootstrap JavaScript подключен в `main.js`
- Проверьте, что в `package.json` есть зависимость `bootstrap: "5.1.3"`
- Перезапустите фронтенд: `npm run dev`

#### 2. Проблемы с копированием в буфер обмена
**Симптомы:** Кнопка "Скопировать" не работает, ошибки в консоли

**Возможные причины:**
- Браузер не поддерживает `navigator.clipboard` API
- Сайт работает по HTTP (не HTTPS)
- Браузер заблокировал доступ к буферу обмена

**Решение:**
- Код уже включает fallback для старых браузеров
- Для HTTPS: убедитесь, что сайт работает по HTTPS
- Для HTTP: fallback должен работать автоматически

#### 3. Проблемы с модальными окнами
**Симптомы:** Кнопка "Детали" не открывает модальное окно

**Решение:**
- Проверьте консоль браузера на ошибки JavaScript
- Убедитесь, что элемент `#sourceModal` существует в DOM
- Проверьте, что Bootstrap Modal инициализирован

### Диагностика

#### 1. Проверка консоли браузера
1. Откройте Developer Tools (F12)
2. Перейдите на вкладку "Console"
3. Нажмите на кнопки "Скопировать" и "Детали"
4. Проверьте наличие ошибок

#### 2. Тестирование компонентов
Откройте файл `test_components.html` в браузере для изолированного тестирования:
- Тест копирования в буфер обмена
- Тест модальных окон
- Проверка загрузки Bootstrap

#### 3. Проверка сетевых запросов
1. В Developer Tools перейдите на вкладку "Network"
2. Отправьте запрос в чате
3. Проверьте, что API возвращает данные с `sources`

### Логи отладки

Код теперь включает подробное логирование:
- Успешные операции копирования
- Ошибки копирования с деталями
- Статус загрузки Bootstrap
- Ошибки модальных окон

### Частые ошибки

#### "Bootstrap не загружен"
```javascript
// В main.js должно быть:
import 'bootstrap/dist/js/bootstrap.bundle.min.js';
```

#### "Clipboard API не поддерживается"
```javascript
// Код автоматически использует fallback:
if (navigator.clipboard && window.isSecureContext) {
    // Современный API
} else {
    // Fallback для старых браузеров
}
```

#### "Элемент модального окна не найден"
```html
<!-- Убедитесь, что в Billing.vue есть: -->
<SourceModal 
  :source="selectedSourceForModal"
  @show-notification="showNotification"
/>
```

### Восстановление после ошибок

1. **Перезапуск фронтенда:**
   ```bash
   cd vite-soft-ui-dashboard-main
   npm run dev
   ```

2. **Очистка кэша браузера:**
   - Ctrl+Shift+R (жесткая перезагрузка)
   - Или очистить кэш в Developer Tools

3. **Проверка зависимостей:**
   ```bash
   npm install
   ```

### Контакты для поддержки

Если проблемы не решаются:
1. Проверьте консоль браузера
2. Убедитесь, что все файлы обновлены
3. Проверьте, что сервер работает корректно
4. Обратитесь к разработчику с логами ошибок 