# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ —Å–∏—Å—Ç–µ–º–µ RAG —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Yandex Cloud.

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≥–∏–±–∫–æ—Å—Ç–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –≤ —Ñ–∞–π–ª–µ `.env` –∏–ª–∏ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**üîÑ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. –§–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
3. –§–∞–π–ª `.env.local` (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è git)
4. –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–æ–¥–µ

**üìÅ –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
- `.env.example` - —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `.env.development` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `.env.testing` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `.env.staging` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è staging —Å—Ä–µ–¥—ã
- `.env.production` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è production

## üîë Yandex Cloud Configuration

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä | –í–∞–ª–∏–¥–∞—Ü–∏—è |
|------------|-----|----------|--------|-----------|
| `YANDEX_API_KEY` | string | API –∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Yandex Cloud | `AQVNxxxxxxxxxxxxxxxxx` | –î–ª–∏–Ω–∞ > 20, —Ç–æ–ª—å–∫–æ [A-Za-z0-9_-] |
| `YANDEX_FOLDER_ID` | string | ID –∫–∞—Ç–∞–ª–æ–≥–∞ –≤ Yandex Cloud | `b1g2xxxxxxxxxxxxxxxxx` | –§–æ—Ä–º–∞—Ç: b1g[0-9a-z]{20} |

**üîç –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è:**

1. **YANDEX_API_KEY**:
   ```bash
   # –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud:
   # 1. IAM ‚Üí –°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã ‚Üí –°–æ–∑–¥–∞—Ç—å
   # 2. –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å: ai.languageModels.user
   # 3. API-–∫–ª—é—á–∏ ‚Üí –°–æ–∑–¥–∞—Ç—å API-–∫–ª—é—á
   # 4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)
   ```

2. **YANDEX_FOLDER_ID**:
   ```bash
   # –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud:
   # 1. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   # 2. ID –∫–∞—Ç–∞–ª–æ–≥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ URL –∏–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞—Ç–∞–ª–æ–≥–∞
   # –ò–ª–∏ —á–µ—Ä–µ–∑ CLI:
   yc config list
   ```

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|
| `USE_YANDEX_CLOUD` | boolean | `false` | –í–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Yandex Cloud |
| `YANDEX_LLM_MODEL` | string | `yandexgpt` | –ú–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ |
| `YANDEX_EMBEDDING_MODEL` | string | `text-search-doc` | –ú–æ–¥–µ–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ |

### API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –î–∏–∞–ø–∞–∑–æ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|----------|
| `YANDEX_BASE_URL` | string | `https://llm.api.cloud.yandex.net` | - | –ë–∞–∑–æ–≤—ã–π URL API Yandex Cloud |
| `YANDEX_TIMEOUT` | integer | `30` | 5-300 | –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö |
| `YANDEX_MAX_TOKENS` | integer | `2000` | 1-8000 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ |
| `YANDEX_TEMPERATURE` | float | `0.1` | 0.0-1.0 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |

### Retry –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –î–∏–∞–ø–∞–∑–æ–Ω | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|----------|
| `YANDEX_MAX_RETRIES` | integer | `3` | 0-10 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ |
| `YANDEX_RETRY_DELAY` | float | `1.0` | 0.1-10.0 | –ë–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏ (—Å–µ–∫) |
| `YANDEX_FALLBACK_TO_OLLAMA` | boolean | `true` | - | Fallback –Ω–∞ Ollama –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö |

### –õ–∏–º–∏—Ç—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|
| `YANDEX_MAX_REQUESTS_PER_MINUTE` | integer | `60` | –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É |
| `YANDEX_MAX_CONCURRENT` | integer | `10` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ |
| `YANDEX_FALLBACK_TIMEOUT` | integer | `60` | –¢–∞–π–º–∞—É—Ç –¥–ª—è fallback –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|
| `YANDEX_ENABLE_CACHING` | boolean | `true` | –í–∫–ª—é—á–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ |
| `YANDEX_CACHE_DIR` | string | `/app/files/cache` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∫—ç—à–∞ |
| `YANDEX_CACHE_TTL_HOURS` | integer | `24` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ –≤ —á–∞—Å–∞—Ö |
| `YANDEX_EMBEDDINGS_CACHE_DIR` | string | `/app/files/embeddings_cache` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫—ç—à–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ |

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|
| `YANDEX_ENABLE_METRICS` | boolean | `true` | –í–∫–ª—é—á–µ–Ω–∏–µ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ |
| `YANDEX_METRICS_FILE` | string | `/app/files/yandex_metrics.json` | –§–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ |
| `YANDEX_ENABLE_PERFORMANCE_MONITORING` | boolean | `true` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |

## ü§ñ Ollama Configuration (Fallback)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|
| `OLLAMA_HOST` | string | `http://localhost:11434` | URL —Å–µ—Ä–≤–µ—Ä–∞ Ollama |
| `OLLAMA_TIMEOUT` | integer | `60` | –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Ollama |
| `OLLAMA_MAX_RETRIES` | integer | `3` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ |
| `OLLAMA_LLM_MODEL` | string | `gemma3` | –ú–æ–¥–µ–ª—å LLM –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è Ollama |
| `OLLAMA_EMBEDDING_MODEL` | string | `nomic-embed-text` | –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è Ollama |

## üóÑÔ∏è Database Configuration

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|
| `DATABASE_URL` | string | `mysql+mysqlconnector://root:123123@localhost:3306/db_test` | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î |
| `DB_POOL_SIZE` | integer | `10` | –†–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π |
| `DB_MAX_OVERFLOW` | integer | `20` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—É–ª–∞ |
| `DB_POOL_TIMEOUT` | integer | `30` | –¢–∞–π–º–∞—É—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è |
| `DB_POOL_RECYCLE` | integer | `3600` | –í—Ä–µ–º—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è |

## üöÄ Application Configuration

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|--------------|----------|
| `DEBUG` | boolean | `false` | –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ |
| `LOG_LEVEL` | string | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR, CRITICAL) |
| `ENVIRONMENT` | string | `development` | –°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (development, testing, staging, production) |
| `SECRET_KEY` | string | - | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `ALLOWED_HOSTS` | string | - | –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) |

## üìù –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### Development (.env)

```bash
# Yandex Cloud
YANDEX_API_KEY=AQVNxxxxxxxxxxxxxxxxx
YANDEX_FOLDER_ID=b1g2xxxxxxxxxxxxxxxxx
USE_YANDEX_CLOUD=true
YANDEX_FALLBACK_TO_OLLAMA=true

# Development settings
DEBUG=true
LOG_LEVEL=DEBUG
ENVIRONMENT=development

# Database
DATABASE_URL=mysql+mysqlconnector://root:password@localhost:3306/rag_dev

# Ollama fallback
OLLAMA_HOST=http://localhost:11434
```

### Staging (.env.staging)

```bash
# Yandex Cloud
YANDEX_API_KEY=AQVNxxxxxxxxxxxxxxxxx
YANDEX_FOLDER_ID=b1g2xxxxxxxxxxxxxxxxx
USE_YANDEX_CLOUD=true
YANDEX_FALLBACK_TO_OLLAMA=false
YANDEX_TIMEOUT=45
YANDEX_MAX_TOKENS=1500

# Staging settings
DEBUG=false
LOG_LEVEL=INFO
ENVIRONMENT=staging

# Database
DATABASE_URL=mysql+mysqlconnector://user:password@staging-db:3306/rag_staging

# Performance tuning
YANDEX_MAX_CONCURRENT=5
YANDEX_CACHE_TTL_HOURS=12
```

### Production (.env.production)

```bash
# Yandex Cloud
YANDEX_API_KEY=AQVNxxxxxxxxxxxxxxxxx
YANDEX_FOLDER_ID=b1g2xxxxxxxxxxxxxxxxx
USE_YANDEX_CLOUD=true
YANDEX_FALLBACK_TO_OLLAMA=false
YANDEX_TIMEOUT=60
YANDEX_MAX_TOKENS=2000
YANDEX_TEMPERATURE=0.05

# Production settings
DEBUG=false
LOG_LEVEL=WARNING
ENVIRONMENT=production
SECRET_KEY=your-super-secret-key-here
ALLOWED_HOSTS=yourdomain.com,api.yourdomain.com

# Database
DATABASE_URL=mysql+mysqlconnector://prod_user:secure_password@prod-db:3306/rag_production

# Performance optimization
YANDEX_MAX_CONCURRENT=20
YANDEX_MAX_REQUESTS_PER_MINUTE=100
YANDEX_CACHE_TTL_HOURS=48
YANDEX_ENABLE_PERFORMANCE_MONITORING=true

# Database pool optimization
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=60
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env —Ñ–∞–π–ª—ã** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ API –∫–ª—é—á–∏** Yandex Cloud
4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –∫ —Ñ–∞–π–ª–∞–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ API –∫–ª—é—á–∞–º

#### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞**: 20 —Å–∏–º–≤–æ–ª–æ–≤
- **–§–æ—Ä–º–∞—Ç**: –¢–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –∏ –¥–µ—Ñ–∏—Å—ã
- **–†–æ–ª–∏**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–æ–ª–∏ (`ai.languageModels.user`)
- **–†–æ—Ç–∞—Ü–∏—è**: –ú–µ–Ω—è–π—Ç–µ –∫–ª—é—á–∏ –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

#### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å Yandex Cloud
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ `/llm/metrics` —ç–Ω–¥–ø–æ–∏–Ω—Ç
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ API –≤—ã–∑–æ–≤—ã –¥–ª—è –∞—É–¥–∏—Ç–∞

#### üö® –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –∫–ª—é—á–∞
```bash
# 1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–∑–æ–≤–∏—Ç–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á
# 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á
# 3. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export YANDEX_API_KEY=new_secure_key_here
# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
systemctl restart your-rag-app
# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python test_config.py

# –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
python -c "from config_utils import validate_all_config_new; validate_all_config_new()"
```

## üê≥ Docker Configuration

### docker-compose.yml

```yaml
version: '3.8'
services:
  app:
    build: .
    environment:
      - YANDEX_API_KEY=${YANDEX_API_KEY}
      - YANDEX_FOLDER_ID=${YANDEX_FOLDER_ID}
      - USE_YANDEX_CLOUD=true
      - DATABASE_URL=${DATABASE_URL}
      - ENVIRONMENT=production
    env_file:
      - .env.production
```

### Kubernetes ConfigMap

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: rag-config
data:
  USE_YANDEX_CLOUD: "true"
  YANDEX_LLM_MODEL: "yandexgpt"
  YANDEX_EMBEDDING_MODEL: "text-search-doc"
  YANDEX_TIMEOUT: "30"
  ENVIRONMENT: "production"
  LOG_LEVEL: "INFO"
---
apiVersion: v1
kind: Secret
metadata:
  name: rag-secrets
type: Opaque
stringData:
  YANDEX_API_KEY: "your-api-key-here"
  YANDEX_FOLDER_ID: "your-folder-id-here"
  DATABASE_URL: "mysql+mysqlconnector://user:pass@host:3306/db"
```

## üîß Troubleshooting

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. **"YANDEX_API_KEY environment variable is required"**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
   echo $YANDEX_API_KEY
   # –ò–ª–∏ –≤ .env —Ñ–∞–π–ª–µ
   grep YANDEX_API_KEY .env
   ```

2. **"Invalid API key format"**
   ```bash
   # API –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–ª–∏–Ω–Ω–µ–µ 20 —Å–∏–º–≤–æ–ª–æ–≤
   # –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, _ –∏ -
   ```

3. **"Configuration validation failed"**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
   python -c "
   from config_utils import validate_all_config_new
   try:
       config = validate_all_config_new()
       print('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞')
   except Exception as e:
       print(f'–û—à–∏–±–∫–∞: {e}')
   "
   ```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
python -c "
from config_utils import get_runtime_config
import json
config = get_runtime_config()
print(json.dumps(config, indent=2, ensure_ascii=False))
"

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Yandex Cloud
python test_config.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π
python -c "
from yandex_cloud_adapter import YandexCloudAdapter
from config_utils import YandexCloudConfig
config = YandexCloudConfig.from_env()
print('–î–æ—Å—Ç—É–ø–Ω—ã–µ LLM –º–æ–¥–µ–ª–∏:', list(config.llm_models.keys()))
print('–î–æ—Å—Ç—É–ø–Ω—ã–µ Embedding –º–æ–¥–µ–ª–∏:', list(config.embedding_models.keys()))
"
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](../README.md)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex Cloud](README_YANDEX_CLOUD.md)
- [Troubleshooting Guide](TROUBLESHOOTING.md)
- [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](CONFIG_EXAMPLES.md)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Yandex Cloud](https://cloud.yandex.ru/docs/foundation-models/)